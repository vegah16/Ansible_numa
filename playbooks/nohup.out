
PLAY [high_performance] ********************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005381", "end": "2021-05-23 20:01:08.166281", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 20:01:08.160900", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'893482780002.48237', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/893482780002.48237'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'197966138006.48263', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/197966138006.48263'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'874742772126.48289', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/874742772126.48289'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'92133846398.48318', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/92133846398.48318'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'837078097560.48344', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/837078097560.48344'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'6466372821.48374', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/6466372821.48374'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.176075", "end": "2021-05-23 20:13:56.565101", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 20:13:55.389026", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [high_performance] ********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005238", "end": "2021-05-23 20:14:19.844703", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 20:14:19.839465", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'38859125143.51469', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/38859125143.51469'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'801283870947.51495', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/801283870947.51495'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'727202544362.51521', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/727202544362.51521'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'135004346041.51550', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/135004346041.51550'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'993861504963.51576', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/993861504963.51576'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'641898748761.51606', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/641898748761.51606'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.972865", "end": "2021-05-23 20:27:07.517454", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 20:27:06.544589", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [latency] *****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004009", "end": "2021-05-23 20:29:46.351399", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 20:29:46.347390", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'508466012519.3641', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/508466012519.3641'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'261941031232.3667', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/261941031232.3667'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'992801689645.3693', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/992801689645.3693'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'773889475115.3721', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/773889475115.3721'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'622919694537.3747', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/622919694537.3747'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'962323309629.3778', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/962323309629.3778'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:03.856787", "end": "2021-05-23 20:42:35.986841", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 20:42:32.130054", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [latency] *****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005194", "end": "2021-05-23 20:43:02.793714", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 20:43:02.788520", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'601064063914.6950', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/601064063914.6950'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'27615841641.6976', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/27615841641.6976'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'896396949751.7002', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/896396949751.7002'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'742101481282.7031', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/742101481282.7031'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'465830876560.7057', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/465830876560.7057'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'230781921316.7087', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/230781921316.7087'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.017465", "end": "2021-05-23 20:55:50.857424", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 20:55:49.839959", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [one_mgmt] ****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005367", "end": "2021-05-23 20:58:32.287983", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 20:58:32.282616", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'56299787020.3556', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/56299787020.3556'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'927667046319.3582', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/927667046319.3582'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'845186366955.3608', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/845186366955.3608'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'255478785172.3636', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/255478785172.3636'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'535376828054.3662', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/535376828054.3662'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'986585214181.3692', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/986585214181.3692'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:04.876134", "end": "2021-05-23 21:11:21.810089", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 21:11:16.933955", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [one_mgmt] ****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004831", "end": "2021-05-23 21:11:49.447466", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 21:11:49.442635", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'686273683227.6779', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/686273683227.6779'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'838647191785.6805', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/838647191785.6805'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'957719110474.6831', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/957719110474.6831'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'207943531822.6860', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/207943531822.6860'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'103683035143.6886', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/103683035143.6886'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'36599817585.6916', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/36599817585.6916'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.138148", "end": "2021-05-23 21:24:37.968795", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 21:24:36.830647", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [mgmt_node1] **************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005097", "end": "2021-05-23 21:25:01.087205", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 21:25:01.082108", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'481276172326.9902', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/481276172326.9902'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'156239826833.9928', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/156239826833.9928'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'302493659285.9954', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/302493659285.9954'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'960699413408.9983', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/960699413408.9983'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'590014688582.10009', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/590014688582.10009'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'196853909304.10039', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/196853909304.10039'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.155218", "end": "2021-05-23 21:37:49.253905", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 21:37:48.098687", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [mgmt_node1] **************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005412", "end": "2021-05-23 21:38:12.429563", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 21:38:12.424151", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'261888645381.13083', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/261888645381.13083'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'931113919151.13109', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/931113919151.13109'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'926056551967.13135', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/926056551967.13135'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'108132650860.13164', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/108132650860.13164'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'953708741647.13190', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/953708741647.13190'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'190474582531.13220', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/190474582531.13220'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.111800", "end": "2021-05-23 21:51:00.650297", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 21:50:59.538497", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [one_cpu_group] ***********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005021", "end": "2021-05-23 21:53:47.460806", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 21:53:47.455785", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'834593287565.3571', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/834593287565.3571'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'699559559227.3597', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/699559559227.3597'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'103217211097.3623', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/103217211097.3623'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'77477955703.3651', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/77477955703.3651'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'153667687597.3677', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/153667687597.3677'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'236722992892.3707', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/236722992892.3707'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:04.159978", "end": "2021-05-23 22:06:36.743127", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 22:06:32.583149", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [one_cpu_group] ***********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004125", "end": "2021-05-23 22:07:03.355928", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 22:07:03.351803", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'878734891593.6765', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/878734891593.6765'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'729068339270.6791', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/729068339270.6791'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'536428992976.6817', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/536428992976.6817'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'141912443479.6846', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/141912443479.6846'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'344807965256.6872', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/344807965256.6872'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'726104662575.6902', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/726104662575.6902'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.912520", "end": "2021-05-23 22:19:51.643752", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 22:19:50.731232", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_memory] **********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004226", "end": "2021-05-23 22:20:14.995510", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 22:20:14.991284", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'735295170095.9881', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/735295170095.9881'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'543124428470.9907', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/543124428470.9907'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'135943366126.9933', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/135943366126.9933'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'573471249086.9962', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/573471249086.9962'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'568328855791.9988', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/568328855791.9988'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'427688785583.10018', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/427688785583.10018'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.913212", "end": "2021-05-23 22:33:03.120986", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 22:33:02.207774", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_memory] **********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004991", "end": "2021-05-23 22:33:26.515380", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 22:33:26.510389", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'847730774841.13059', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/847730774841.13059'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'808369388041.13085', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/808369388041.13085'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'595449118684.13111', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/595449118684.13111'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'801091910070.13140', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/801091910070.13140'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'329809472639.13166', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/329809472639.13166'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'411871799957.13196', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/411871799957.13196'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.928975", "end": "2021-05-23 22:46:14.928339", "msg": "non-zero return code", "rc": 1, "start": "2021-05-23 22:46:13.999364", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_buffer] **********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005301", "end": "2021-05-23 22:46:38.409545", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 22:46:38.404244", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'401219114254.16278', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/401219114254.16278'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'421707582200.16304', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/421707582200.16304'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'509687652577.16330', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/509687652577.16330'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'638320539245.16359', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/638320539245.16359'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'308797630042.16385', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/308797630042.16385'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'361506049184.16415', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/361506049184.16415'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_buffer] **********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005205", "end": "2021-05-23 22:59:50.188806", "msg": "non-zero return code", "rc": 78, "start": "2021-05-23 22:59:50.183601", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'803598954179.19398', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/803598954179.19398'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'682342574477.19424', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/682342574477.19424'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'818656264131.19450', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/818656264131.19450'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'377207133635.19479', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/377207133635.19479'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'100545218544.19505', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/100545218544.19505'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'859496111411.19535', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/859496111411.19535'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=647  changed=489  unreachable=0    failed=0    skipped=0    rescued=0    ignored=26  


PLAY [traffic_1] ***************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005279", "end": "2021-05-24 00:13:26.109312", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 00:13:26.104033", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'732597093376.23133', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/732597093376.23133'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'591670459738.23159', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/591670459738.23159'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'630405628073.23185', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/630405628073.23185'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'563343137081.23214', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/563343137081.23214'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'219623539915.23240', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/219623539915.23240'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'460360689781.23270', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/460360689781.23270'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.862499", "end": "2021-05-24 00:26:13.875637", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 00:26:13.013138", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_2] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004058", "end": "2021-05-24 00:26:36.568508", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 00:26:36.564450", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'697927869408.26288', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/697927869408.26288'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'845917090699.26314', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/845917090699.26314'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'891765314947.26340', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/891765314947.26340'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'64706915868.26369', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/64706915868.26369'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'281898818589.26395', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/281898818589.26395'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'8698291174.26425', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/8698291174.26425'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.142583", "end": "2021-05-24 00:39:22.650934", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 00:39:21.508351", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_3] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005093", "end": "2021-05-24 00:39:46.144674", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 00:39:46.139581", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'792549176005.29383', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/792549176005.29383'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'853549571997.29409', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/853549571997.29409'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'331645849662.29435', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/331645849662.29435'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'44400218622.29464', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/44400218622.29464'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'299860775290.29490', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/299860775290.29490'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'680971457230.29520', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/680971457230.29520'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.150998", "end": "2021-05-24 00:52:32.690621", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 00:52:31.539623", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_4] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005171", "end": "2021-05-24 00:52:56.317836", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 00:52:56.312665", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'908582793030.32486', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/908582793030.32486'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'989443823890.32512', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/989443823890.32512'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'103598497140.32538', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/103598497140.32538'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'244203644846.32567', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/244203644846.32567'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'97484065945.32593', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/97484065945.32593'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'22594425306.32623', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/22594425306.32623'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.029155", "end": "2021-05-24 01:05:43.245293", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 01:05:42.216138", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_5] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005411", "end": "2021-05-24 01:06:06.546395", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 01:06:06.540984", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'694919205241.35591', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/694919205241.35591'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'906700063453.35617', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/906700063453.35617'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'131489221673.35643', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/131489221673.35643'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'258087677996.35672', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/258087677996.35672'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'143511980080.35698', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/143511980080.35698'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'275457697255.35728', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/275457697255.35728'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.916039", "end": "2021-05-24 01:18:53.592501", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 01:18:52.676462", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_6] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004959", "end": "2021-05-24 01:19:16.635504", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 01:19:16.630545", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'127640870029.38768', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/127640870029.38768'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'572747704800.38794', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/572747704800.38794'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'855977891586.38820', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/855977891586.38820'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'427645940016.38849', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/427645940016.38849'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'382464496579.38875', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/382464496579.38875'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'302211292555.38905', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/302211292555.38905'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.855081", "end": "2021-05-24 01:32:03.967723", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 01:32:03.112642", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_7] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004978", "end": "2021-05-24 01:32:27.204256", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 01:32:27.199278", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'866776706511.41916', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/866776706511.41916'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'718291655520.41942', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/718291655520.41942'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'747836381093.41968', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/747836381093.41968'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'499512231199.41997', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/499512231199.41997'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'911519703482.42023', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/911519703482.42023'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'271912213486.42053', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/271912213486.42053'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.861439", "end": "2021-05-24 01:45:15.285758", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 01:45:14.424319", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_8] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004340", "end": "2021-05-24 01:45:38.703691", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 01:45:38.699351", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'613109881156.45056', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/613109881156.45056'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'308405775126.45082', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/308405775126.45082'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'880014534193.45108', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/880014534193.45108'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'383337885878.45137', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/383337885878.45137'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'425038958400.45163', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/425038958400.45163'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'264051908968.45193', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/264051908968.45193'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.076040", "end": "2021-05-24 01:58:26.964487", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 01:58:25.888447", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=368  changed=273  unreachable=0    failed=0    skipped=0    rescued=0    ignored=16  


PLAY [traffic_1] ***************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.003616", "end": "2021-05-24 11:02:06.406386", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:02:06.402770", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'92514946297.4672', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/92514946297.4672'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'335300695963.4698', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/335300695963.4698'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'760921151583.4724', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/760921151583.4724'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'916364807517.4752', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/916364807517.4752'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'258229382302.4779', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/258229382302.4779'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'660354018992.4809', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/660354018992.4809'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.981913", "end": "2021-05-24 11:06:49.223052", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:06:47.241139", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_2] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004017", "end": "2021-05-24 11:07:10.017134", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:07:10.013117", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'336706381889.7530', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/336706381889.7530'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'625930080967.7556', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/625930080967.7556'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'663127077716.7582', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/663127077716.7582'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'726031706626.7611', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/726031706626.7611'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'674102716488.7637', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/674102716488.7637'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'596364127029.7667', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/596364127029.7667'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.362770", "end": "2021-05-24 11:11:50.660027", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:11:50.297257", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_3] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005254", "end": "2021-05-24 11:12:10.540883", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:12:10.535629", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'961430750437.10433', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/961430750437.10433'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'469563571832.10459', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/469563571832.10459'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'604367015432.10485', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/604367015432.10485'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'275277115385.10514', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/275277115385.10514'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'3917299911.10540', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/3917299911.10540'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'706458348561.10570', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/706458348561.10570'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.323189", "end": "2021-05-24 11:16:51.083875", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:16:50.760686", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_4] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005205", "end": "2021-05-24 11:17:11.094282", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:17:11.089077", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'594984812767.13292', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/594984812767.13292'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'277253210293.13318', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/277253210293.13318'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'196230161798.13344', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/196230161798.13344'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'407332379241.13373', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/407332379241.13373'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'402258694142.13399', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/402258694142.13399'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'467403647624.13429', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/467403647624.13429'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.328154", "end": "2021-05-24 11:21:51.966082", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:21:51.637928", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_5] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005323", "end": "2021-05-24 11:22:11.867646", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:22:11.862323", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'285673151531.16227', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/285673151531.16227'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'601959032165.16253', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/601959032165.16253'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'330809018507.16279', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/330809018507.16279'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'628742962377.16308', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/628742962377.16308'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'926453264758.16334', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/926453264758.16334'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'552340592670.16364', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/552340592670.16364'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.328812", "end": "2021-05-24 11:26:52.773968", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:26:52.445156", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_6] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004980", "end": "2021-05-24 11:27:13.179935", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:27:13.174955", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'19961684336.19132', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/19961684336.19132'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'806455335090.19158', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/806455335090.19158'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'449036628938.19184', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/449036628938.19184'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'259346789818.19213', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/259346789818.19213'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'772381399283.19239', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/772381399283.19239'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'860934196780.19269', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/860934196780.19269'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.328226", "end": "2021-05-24 11:31:54.140985", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:31:53.812759", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_7] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005197", "end": "2021-05-24 11:32:14.385467", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:32:14.380270", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'595290793161.22062', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/595290793161.22062'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'772706681578.22088', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/772706681578.22088'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'275274247976.22114', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/275274247976.22114'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'391999025252.22143', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/391999025252.22143'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'859850588049.22169', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/859850588049.22169'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'692621134757.22200', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/692621134757.22200'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.329915", "end": "2021-05-24 11:36:55.282285", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:36:54.952370", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_8] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005003", "end": "2021-05-24 11:37:17.416213", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 11:37:17.411210", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 12)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 12)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12)
changed: [vhe@192.168.1.191] => (item=for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'538172669301.24914', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/538172669301.24914'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'185777941272.24940', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 12', u'finished': 0, u'results_file': u'/root/.ansible_async/185777941272.24940'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'447946555163.24966', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 120', u'finished': 0, u'results_file': u'/root/.ansible_async/447946555163.24966'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'385707482098.24995', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 12", u'finished': 0, u'results_file': u'/root/.ansible_async/385707482098.24995'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'889540129745.25021', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..12}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/889540129745.25021'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'105314484744.25051', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 12 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/105314484744.25051'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.327644", "end": "2021-05-24 11:41:58.348817", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 11:41:58.021173", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=368  changed=273  unreachable=0    failed=0    skipped=0    rescued=0    ignored=16  


PLAY [traffic_1] ***************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002472", "end": "2021-05-24 12:05:57.807184", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:05:57.804712", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'65191203386.3596', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/65191203386.3596'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'108717724125.3622', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/108717724125.3622'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'343104316742.3648', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/343104316742.3648'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'95023262608.3676', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/95023262608.3676'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'643638995648.3704', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/643638995648.3704'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'775800487207.3734', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/775800487207.3734'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.700100", "end": "2021-05-24 12:11:38.824851", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:11:37.124751", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_2] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002280", "end": "2021-05-24 12:11:59.229909", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:11:59.227629", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'327547554584.6605', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/327547554584.6605'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'770677021535.6631', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/770677021535.6631'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'48990357457.6657', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/48990357457.6657'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'727320201610.6686', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/727320201610.6686'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'827371205625.6712', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/827371205625.6712'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'185385926034.6742', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/185385926034.6742'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.422372", "end": "2021-05-24 12:17:39.213238", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:17:38.790866", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_3] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002314", "end": "2021-05-24 12:17:57.749581", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:17:57.747267", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'495002960321.9537', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/495002960321.9537'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'384721129031.9563', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/384721129031.9563'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'962861573975.9589', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/962861573975.9589'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'712079641067.9618', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/712079641067.9618'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'107362112140.9644', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/107362112140.9644'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'421117304955.9674', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/421117304955.9674'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.412279", "end": "2021-05-24 12:23:37.900280", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:23:37.488001", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_4] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002381", "end": "2021-05-24 12:23:57.428359", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:23:57.425978", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'234534129735.12429', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/234534129735.12429'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'20802570516.12455', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/20802570516.12455'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'317763977144.12481', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/317763977144.12481'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'581039135569.12510', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/581039135569.12510'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'982414691804.12536', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/982414691804.12536'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'609853224477.12566', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/609853224477.12566'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.414188", "end": "2021-05-24 12:29:37.510905", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:29:37.096717", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_5] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002312", "end": "2021-05-24 12:29:55.943789", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:29:55.941477", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'793945116186.15297', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/793945116186.15297'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'306395633549.15323', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/306395633549.15323'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'78186220856.15349', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/78186220856.15349'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'601742964317.15378', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/601742964317.15378'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'731572384056.15404', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/731572384056.15404'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'96719942097.15434', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/96719942097.15434'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.410604", "end": "2021-05-24 12:35:36.167779", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:35:35.757175", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_6] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002285", "end": "2021-05-24 12:35:54.990597", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:35:54.988312", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'47026100672.18165', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/47026100672.18165'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'364157990511.18191', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/364157990511.18191'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'494609895883.18217', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/494609895883.18217'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'506640774795.18246', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/506640774795.18246'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'323420139938.18272', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/323420139938.18272'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'651256744242.18302', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/651256744242.18302'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.410025", "end": "2021-05-24 12:41:35.357520", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:41:34.947495", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_7] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002264", "end": "2021-05-24 12:41:54.034408", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:41:54.032144", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'299211657401.21045', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/299211657401.21045'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'601590254537.21071', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/601590254537.21071'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'610657105450.21097', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/610657105450.21097'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'123687125852.21126', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/123687125852.21126'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'998320859120.21152', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/998320859120.21152'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'653645059501.21182', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/653645059501.21182'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.415261", "end": "2021-05-24 12:47:34.410569", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:47:33.995308", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [traffic_8] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002290", "end": "2021-05-24 12:47:52.806043", "msg": "non-zero return code", "rc": 78, "start": "2021-05-24 12:47:52.803753", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.log] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'553843139208.23954', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/553843139208.23954'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'36246395106.23980', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/36246395106.23980'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'993520449149.24006', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/993520449149.24006'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'282775562873.24035', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/282775562873.24035'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'437218185919.24061', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/437218185919.24061'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'947574326713.24091', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/947574326713.24091'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.420142", "end": "2021-05-24 12:53:33.274514", "msg": "non-zero return code", "rc": 1, "start": "2021-05-24 12:53:32.854372", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=369  changed=274  unreachable=0    failed=0    skipped=0    rescued=0    ignored=16  


PLAY [cpu_20] ******************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005084", "end": "2021-05-25 16:03:35.434415", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 16:03:35.429331", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'404911485092.3806', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/404911485092.3806'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'222967523548.3832', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/222967523548.3832'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'399391058954.3858', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/399391058954.3858'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'480375703032.3886', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/480375703032.3886'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'948463127351.3912', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/948463127351.3912'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'51181540279.3943', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/51181540279.3943'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_19] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004540", "end": "2021-05-25 16:13:50.121269", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 16:13:50.116729", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'280045460139.3881', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/280045460139.3881'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'659384974655.3907', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/659384974655.3907'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'358582528555.3933', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/358582528555.3933'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'20812585954.3961', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/20812585954.3961'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'766470534297.3988', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/766470534297.3988'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'72892223644.4018', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/72892223644.4018'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_18] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.003922", "end": "2021-05-25 16:23:59.964941", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 16:23:59.961019", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'946143608088.3947', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/946143608088.3947'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'5250068131.3973', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/5250068131.3973'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'593824039560.3999', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/593824039560.3999'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'494757916349.4027', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/494757916349.4027'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'955847106449.4053', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/955847106449.4053'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'721395917212.4084', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/721395917212.4084'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_17] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005134", "end": "2021-05-25 16:34:06.164214", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 16:34:06.159080", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'348666345924.3968', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/348666345924.3968'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'779248928284.3994', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/779248928284.3994'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'377517556766.4020', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/377517556766.4020'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'941470225917.4048', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/941470225917.4048'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'798529334443.4074', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/798529334443.4074'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'486669913097.4104', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/486669913097.4104'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_16] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005468", "end": "2021-05-25 16:45:50.161035", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 16:45:50.155567", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'148436141488.3863', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/148436141488.3863'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'726047001715.3889', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/726047001715.3889'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'739982382969.3915', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/739982382969.3915'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'424763207638.3943', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/424763207638.3943'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'122565695919.3969', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/122565695919.3969'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'162346220239.4000', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/162346220239.4000'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_15] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004890", "end": "2021-05-25 16:56:00.028548", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 16:56:00.023658", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'917567056811.4184', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/917567056811.4184'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'350073787992.4210', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/350073787992.4210'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'133224197828.4236', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/133224197828.4236'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'747995037831.4264', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/747995037831.4264'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'298499260230.4290', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/298499260230.4290'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'607506749743.4321', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/607506749743.4321'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:04.922337", "end": "2021-05-25 17:03:17.610565", "msg": "non-zero return code", "rc": 1, "start": "2021-05-25 17:03:12.688228", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_14] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004933", "end": "2021-05-25 17:06:05.735374", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 17:06:05.730441", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'160293005522.4182', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/160293005522.4182'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'102770840079.4208', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/102770840079.4208'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'162741586749.4234', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/162741586749.4234'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'603317959069.4262', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/603317959069.4262'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'868119260777.4288', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/868119260777.4288'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'850108148861.4319', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/850108148861.4319'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_13] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005018", "end": "2021-05-25 17:16:10.176677", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 17:16:10.171659", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'409505427914.3840', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/409505427914.3840'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'118112477073.3866', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/118112477073.3866'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'2515700548.3892', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/2515700548.3892'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'565797966922.3918', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/565797966922.3918'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'691424661088.3946', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/691424661088.3946'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'733530621682.3977', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/733530621682.3977'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_12] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005089", "end": "2021-05-25 17:26:21.805677", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 17:26:21.800588", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'366689671440.3841', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/366689671440.3841'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'358165498275.3867', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/358165498275.3867'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'33929661266.3893', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/33929661266.3893'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'511153012229.3921', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/511153012229.3921'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'260233758174.3947', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/260233758174.3947'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'377436045787.3977', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/377436045787.3977'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_11] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005115", "end": "2021-05-25 17:36:34.760150", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 17:36:34.755035", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'114128985471.3908', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/114128985471.3908'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'228667299313.3934', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/228667299313.3934'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'825083996112.3960', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/825083996112.3960'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'858031836130.3988', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/858031836130.3988'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'552824882756.4014', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/552824882756.4014'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'264342735929.4044', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/264342735929.4044'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_10] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004821", "end": "2021-05-25 17:46:46.325624", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 17:46:46.320803", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'949896274067.3942', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/949896274067.3942'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'788035335429.3968', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/788035335429.3968'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'13782218709.3994', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/13782218709.3994'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'967559330496.4022', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/967559330496.4022'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'533417295484.4048', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/533417295484.4048'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'779905490849.4078', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/779905490849.4078'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_9] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005041", "end": "2021-05-25 17:56:53.360754", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 17:56:53.355713", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'858137277157.3885', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/858137277157.3885'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'580145450430.3911', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/580145450430.3911'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'688761523997.3937', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/688761523997.3937'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'192266323988.3965', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/192266323988.3965'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'432073668546.3991', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/432073668546.3991'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'10113038045.4022', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/10113038045.4022'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_8] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004893", "end": "2021-05-25 18:07:08.758789", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 18:07:08.753896", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'129388071554.4156', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/129388071554.4156'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'281753366798.4182', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/281753366798.4182'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'397255167355.4208', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/397255167355.4208'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'304583289363.4236', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/304583289363.4236'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'869130420613.4262', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/869130420613.4262'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'378382761941.4293', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/378382761941.4293'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_7] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005076", "end": "2021-05-25 18:17:21.227851", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 18:17:21.222775", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'86327861241.3921', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/86327861241.3921'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'965664743511.3947', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/965664743511.3947'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'814215869255.3973', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/814215869255.3973'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'838547740715.4001', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/838547740715.4001'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'734005550528.4027', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/734005550528.4027'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'61488046997.4058', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/61488046997.4058'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_6] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005081", "end": "2021-05-25 18:27:22.042892", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 18:27:22.037811", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'236848061410.3867', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/236848061410.3867'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'550965172324.3893', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/550965172324.3893'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'497517115673.3919', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/497517115673.3919'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'76100669582.3947', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/76100669582.3947'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'390062756415.3973', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/390062756415.3973'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'642051004026.4004', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/642051004026.4004'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_5] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005064", "end": "2021-05-25 18:37:42.006174", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 18:37:42.001110", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'372512253730.3971', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/372512253730.3971'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'542043009478.3997', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/542043009478.3997'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'567171784570.4023', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/567171784570.4023'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'28744580324.4051', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/28744580324.4051'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'375495272222.4077', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/375495272222.4077'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'442353656936.4108', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/442353656936.4108'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_4] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005055", "end": "2021-05-25 18:47:52.708314", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 18:47:52.703259", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'787516104113.3868', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/787516104113.3868'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'271082482562.3894', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/271082482562.3894'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'719021925012.3920', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/719021925012.3920'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'23783659129.3948', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/23783659129.3948'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'919592051332.3974', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/919592051332.3974'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'244578500480.4005', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/244578500480.4005'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_3] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004528", "end": "2021-05-25 18:58:07.903822", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 18:58:07.899294", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'965203394204.3910', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/965203394204.3910'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'422656048742.3936', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/422656048742.3936'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'85369466507.3962', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/85369466507.3962'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'99401102646.3990', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/99401102646.3990'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'655191597559.4016', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/655191597559.4016'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'85777893030.4047', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/85777893030.4047'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_2] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004819", "end": "2021-05-25 19:08:14.056044", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 19:08:14.051225", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'560690741664.4020', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/560690741664.4020'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'414874209502.4046', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/414874209502.4046'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'558975346138.4072', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/558975346138.4072'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'904449414052.4100', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/904449414052.4100'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'653768359662.4126', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/653768359662.4126'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'252608451262.4156', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/252608451262.4156'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_1] *******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004717", "end": "2021-05-25 19:18:32.905665", "msg": "non-zero return code", "rc": 78, "start": "2021-05-25 19:18:32.900948", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'981199438031.3899', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/981199438031.3899'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'326066524323.3925', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/326066524323.3925'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'980112079392.3951', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/980112079392.3951'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'86507195201.3979', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/86507195201.3979'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'980267255257.4005', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/980267255257.4005'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'830951328255.4035', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/830951328255.4035'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=940  changed=740  unreachable=0    failed=0    skipped=0    rescued=0    ignored=21  


PLAY [cpu_15] ******************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005163", "end": "2021-05-26 09:30:01.123068", "msg": "non-zero return code", "rc": 78, "start": "2021-05-26 09:30:01.117905", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 18)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 18)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18)
changed: [vhe@192.168.1.191] => (item=for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 180 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'99948792909.3986', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/99948792909.3986'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'143926231861.4012', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 18', u'finished': 0, u'results_file': u'/root/.ansible_async/143926231861.4012'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'585358572782.4038', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 180', u'finished': 0, u'results_file': u'/root/.ansible_async/585358572782.4038'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'568195486281.4066', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 18", u'finished': 0, u'results_file': u'/root/.ansible_async/568195486281.4066'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'550715637955.4092', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..18}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/550715637955.4092'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'993223629579.4123', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 18 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/993223629579.4123'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=47   changed=37   unreachable=0    failed=0    skipped=0    rescued=0    ignored=1   


PLAY [cpu_15] ******************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.003969", "end": "2021-05-26 09:41:30.374489", "msg": "non-zero return code", "rc": 78, "start": "2021-05-26 09:41:30.370520", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)

PLAY [cpu_15] ******************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004503", "end": "2021-05-26 12:55:37.385201", "msg": "non-zero return code", "rc": 78, "start": "2021-05-26 12:55:37.380698", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'674231711591.63093', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/674231711591.63093'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'311835411626.63119', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/311835411626.63119'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'541196810653.63145', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/541196810653.63145'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'67144551248.63174', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/67144551248.63174'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'960620725151.63206', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/960620725151.63206'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'990761618946.63236', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/990761618946.63236'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.520376", "end": "2021-05-26 13:08:21.224287", "msg": "non-zero return code", "rc": 1, "start": "2021-05-26 13:08:20.703911", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_14] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.005139", "end": "2021-05-26 13:11:13.831162", "msg": "non-zero return code", "rc": 78, "start": "2021-05-26 13:11:13.826023", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'269301303669.3701', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/269301303669.3701'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'823127020689.3727', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/823127020689.3727'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'26095141105.3754', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/26095141105.3754'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'951979423698.3782', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/951979423698.3782'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'944727495657.3808', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/944727495657.3808'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'164644422224.3838', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/164644422224.3838'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:03.500638", "end": "2021-05-26 13:24:00.932558", "msg": "non-zero return code", "rc": 1, "start": "2021-05-26 13:23:57.431920", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_13] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004729", "end": "2021-05-26 13:26:58.624210", "msg": "non-zero return code", "rc": 78, "start": "2021-05-26 13:26:58.619481", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'131771917713.3695', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/131771917713.3695'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'392916692809.3722', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/392916692809.3722'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'257334452398.3748', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/257334452398.3748'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'398018591869.3776', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/398018591869.3776'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'658809590610.3802', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/658809590610.3802'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'746436937547.3833', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/746436937547.3833'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:02.667829", "end": "2021-05-26 13:39:45.521774", "msg": "non-zero return code", "rc": 1, "start": "2021-05-26 13:39:42.853945", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_12] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.004474", "end": "2021-05-26 13:42:36.651523", "msg": "non-zero return code", "rc": 78, "start": "2021-05-26 13:42:36.647049", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'219394872841.3744', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/219394872841.3744'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'41252000707.3771', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/41252000707.3771'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'953467982891.3797', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/953467982891.3797'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'592360580540.3825', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/592360580540.3825'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'229663746567.3851', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/229663746567.3851'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'601024801498.3882', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/601024801498.3882'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 192.168.1.191 closed.", "unreachable": true}

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=182  changed=141  unreachable=1    failed=0    skipped=0    rescued=0    ignored=7   


PLAY [default_1] ***************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'128624001845.3510', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/128624001845.3510'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'599412276555.3536', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/599412276555.3536'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'33457900207.3562', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/33457900207.3562'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'781966068468.3590', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/781966068468.3590'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'681983189932.3617', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/681983189932.3617'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'256112605166.3647', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/256112605166.3647'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:01.713973", "end": "2021-05-28 11:08:13.567418", "msg": "non-zero return code", "rc": 1, "start": "2021-05-28 11:08:11.853445", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_2] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'292855925136.6508', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/292855925136.6508'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'476788772280.6534', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/476788772280.6534'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'803813076661.6560', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/803813076661.6560'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'746015369180.6589', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/746015369180.6589'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'568222266435.6615', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/568222266435.6615'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'748924867517.6645', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/748924867517.6645'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_3] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'567758891387.9402', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/567758891387.9402'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'110623545227.9428', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/110623545227.9428'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'336890668213.9454', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/336890668213.9454'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'254308664993.9483', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/254308664993.9483'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'435706083993.9509', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/435706083993.9509'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'808383482991.9539', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/808383482991.9539'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_4] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'279421469605.12308', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/279421469605.12308'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'761824946508.12334', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/761824946508.12334'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'384615279893.12360', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/384615279893.12360'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'239898245858.12389', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/239898245858.12389'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'843178832260.12415', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/843178832260.12415'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'914542059377.12445', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/914542059377.12445'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_15] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'654484183864.15089', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/654484183864.15089'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'867281834836.15115', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/867281834836.15115'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'488876792502.15141', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/488876792502.15141'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'782852169049.15170', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/782852169049.15170'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'409640116857.15196', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/409640116857.15196'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'324073668624.15226', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/324073668624.15226'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.396640", "end": "2021-05-28 12:00:18.978177", "msg": "non-zero return code", "rc": 1, "start": "2021-05-28 12:00:18.581537", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_14] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'705611625625.17897', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/705611625625.17897'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'161577214355.17923', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/161577214355.17923'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'207406107190.17949', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/207406107190.17949'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'970212742570.17978', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/970212742570.17978'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'691446171578.18004', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/691446171578.18004'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'373871362169.18034', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/373871362169.18034'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.391334", "end": "2021-05-28 12:13:18.846466", "msg": "non-zero return code", "rc": 1, "start": "2021-05-28 12:13:18.455132", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_13] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'728211133083.20665', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/728211133083.20665'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'359403316537.20691', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/359403316537.20691'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'609167600491.20717', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/609167600491.20717'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'103768536111.20746', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/103768536111.20746'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'998023049294.20772', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/998023049294.20772'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'276656468559.20802', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/276656468559.20802'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.413068", "end": "2021-05-28 12:26:19.338736", "msg": "non-zero return code", "rc": 1, "start": "2021-05-28 12:26:18.925668", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_12] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'645231236387.23458', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/645231236387.23458'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'228975401467.23484', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/228975401467.23484'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'464916880104.23510', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/464916880104.23510'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'234745504183.23539', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/234745504183.23539'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'14084251517.23565', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/14084251517.23565'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'671016748549.23595', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/671016748549.23595'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.556940", "end": "2021-05-28 12:39:19.233228", "msg": "non-zero return code", "rc": 1, "start": "2021-05-28 12:39:18.676288", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_11] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'153255762888.26709', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/153255762888.26709'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'818533308875.26735', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/818533308875.26735'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'511212750390.26761', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/511212750390.26761'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'472044818072.26790', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/472044818072.26790'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'277198602722.26816', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/277198602722.26816'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'855913481294.26846', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/855913481294.26846'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.504396", "end": "2021-05-28 12:52:19.257459", "msg": "non-zero return code", "rc": 1, "start": "2021-05-28 12:52:18.753063", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_10] ******************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'62165609462.29479', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/62165609462.29479'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'789513676787.29505', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/789513676787.29505'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'229484653373.29531', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/229484653373.29531'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'215525928145.29560', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/215525928145.29560'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'327765283736.29586', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/327765283736.29586'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'272547548417.29616', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/272547548417.29616'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.677557", "end": "2021-05-28 13:05:19.977802", "msg": "non-zero return code", "rc": 1, "start": "2021-05-28 13:05:19.300245", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [cpu_9] *******************************************************************

TASK [Gathering Facts] *********************************************************

PLAY [default_6] ***************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'719446090102.3435', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/719446090102.3435'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'91751126275.3461', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/91751126275.3461'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'372451039474.3487', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/372451039474.3487'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'431806966457.3515', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/431806966457.3515'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'456249944462.3541', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/456249944462.3541'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'785846618999.3572', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/785846618999.3572'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_7] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
skipping: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
skipping: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
skipping: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
skipping: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
skipping: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
skipping: [vhe@192.168.1.191]

TASK [common : Adaptive control is disabled for lowest possible latency] *******
skipping: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
skipping: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
skipping: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
skipping: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'765224840754.6414', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/765224840754.6414'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'657811948187.6440', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/657811948187.6440'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'580334726814.6466', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/580334726814.6466'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'279284839068.6495', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/279284839068.6495'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'582079464849.6521', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/582079464849.6521'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'632840553539.6551', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/632840553539.6551'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_8] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
fatal: [vhe@192.168.1.191]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Shared connection to 192.168.1.191 closed.", "unreachable": true}

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=76   changed=50   unreachable=1    failed=0    skipped=26   rescued=0    ignored=0   


PLAY [mgmt_node1] **************************************************************

TASK [Gathering Facts] *********************************************************
[DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host vhe@192.168.1.191 
should use /usr/bin/python3, but is using /usr/bin/python for backward 
compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs
.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for 
more information. This feature will be removed in version 2.12. Deprecation 
warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

RUNNING HANDLER [common : Reboot to apply isolcpus] ****************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002265", "end": "2021-05-30 10:37:07.306242", "msg": "non-zero return code", "rc": 78, "start": "2021-05-30 10:37:07.303977", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'840763010480.3707', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/840763010480.3707'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'236876381781.3733', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/236876381781.3733'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'532947617304.3759', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/532947617304.3759'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'394920082972.3787', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/394920082972.3787'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'333237417996.3813', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/333237417996.3813'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'659247227931.3843', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/659247227931.3843'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_buffer] **********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002303", "end": "2021-05-30 10:50:18.289220", "msg": "non-zero return code", "rc": 78, "start": "2021-05-30 10:50:18.286917", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'723089046810.7045', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/723089046810.7045'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'738170229486.7071', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/738170229486.7071'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'832000814772.7097', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/832000814772.7097'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'197882732871.7126', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/197882732871.7126'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'166561115723.7152', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/166561115723.7152'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'525715500258.7182', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/525715500258.7182'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_memory] **********************************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002334", "end": "2021-05-30 11:03:21.441225", "msg": "non-zero return code", "rc": 78, "start": "2021-05-30 11:03:21.438891", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'381161920946.10216', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/381161920946.10216'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'279321410368.10242', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/279321410368.10242'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'895691943196.10268', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/895691943196.10268'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'799027208807.10297', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/799027208807.10297'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'673041038225.10323', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/673041038225.10323'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'785066406237.10353', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/785066406237.10353'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.438595", "end": "2021-05-30 11:16:04.056707", "msg": "non-zero return code", "rc": 1, "start": "2021-05-30 11:16:03.618112", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY [default_memory_and_buffer] ***********************************************

TASK [Gathering Facts] *********************************************************
ok: [vhe@192.168.1.191]

TASK [common : Set passwordless sudo] ******************************************
ok: [vhe@192.168.1.191]

TASK [common : Modify grub file] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Update grub] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Install packages] ***********************************************
ok: [vhe@192.168.1.191]

TASK [common : Make sure directory exists] *************************************
ok: [vhe@192.168.1.191]

TASK [common : Unarchive driver stored locally] ********************************
ok: [vhe@192.168.1.191]

TASK [common : Remove driver] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Add driver] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop irqbalance for high performance optimisation] **************
ok: [vhe@192.168.1.191]

TASK [common : Set irq affinity] ***********************************************
changed: [vhe@192.168.1.191]

TASK [common : Disable NIC] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Change the number of RSS queues] ********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable receive hashing offload] *********************************
changed: [vhe@192.168.1.191]

TASK [common : Enable Rx ntuple filters and actions] ***************************
changed: [vhe@192.168.1.191]

TASK [common : Enable NIC] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Allow symmetric hashing by using low entropy toeplitz key] ******
changed: [vhe@192.168.1.191]

TASK [common : Disable RX/TX pause.] *******************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["ethtool", "-A", "ens2f0", "rx", "off", "tx", "off"], "delta": "0:00:00.002401", "end": "2021-05-30 11:16:24.815132", "msg": "non-zero return code", "rc": 78, "start": "2021-05-30 11:16:24.812731", "stderr": "rx unmodified, ignoring\ntx unmodified, ignoring\nno pause parameters changed, aborting", "stderr_lines": ["rx unmodified, ignoring", "tx unmodified, ignoring", "no pause parameters changed, aborting"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Adaptive control is disabled for lowest possible latency] *******
changed: [vhe@192.168.1.191]

TASK [common : Changes the number of ring entries for the Rx ring.] ************
changed: [vhe@192.168.1.191]

TASK [common : Make sure the RSS hash function is Toeplitz.] *******************
changed: [vhe@192.168.1.191]

TASK [common : Let the NIC balance as much as possible] ************************
changed: [vhe@192.168.1.191]

TASK [common : Clean suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Clean eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Configure suricata] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Start Suricata] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata initialization] ******************************
Pausing for 30 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Start Trex traffic generator] ***********************************
changed: [vhe@192.168.1.191]

TASK [common : Create timestamped dir for storing results] *********************
changed: [vhe@192.168.1.191]

TASK [common : Copy softnet-stat.pl script to remote] **************************
ok: [vhe@192.168.1.191]

TASK [common : Start commands used for logging stats] **************************
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -N 0,1 10 60)
changed: [vhe@192.168.1.191] => (item=mpstat -P 0-63 -I SCPU -I SUM 10 60)
changed: [vhe@192.168.1.191] => (item=perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600)
changed: [vhe@192.168.1.191] => (item=pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60)
changed: [vhe@192.168.1.191] => (item=for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done)
changed: [vhe@192.168.1.191] => (item=perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10)

TASK [common : Pause for testing] **********************************************
Pausing for 600 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Kill Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Pause for Suricata to shut down] ********************************
Pausing for 120 seconds
(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
ok: [vhe@192.168.1.191]

TASK [common : Stop Suricata] **************************************************
changed: [vhe@192.168.1.191]

TASK [common : Wait for async tasks to finish] *********************************
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'597292110088.13376', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -N 0,1 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/597292110088.13376'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'944227002462.13402', u'failed': False, u'started': 1, u'changed': True, u'item': u'mpstat -P 0-63 -I SCPU -I SUM 10 60', u'finished': 0, u'results_file': u'/root/.ansible_async/944227002462.13402'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'127368258765.13428', u'failed': False, u'started': 1, u'changed': True, u'item': u'perf stat --log-fd 1 -I 10000 -e LLC-loads,LLC-load-misses,LLC-stores,LLC-prefetches -C 0-63 sleep 600', u'finished': 0, u'results_file': u'/root/.ansible_async/127368258765.13428'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'809691075758.13457', u'failed': False, u'started': 1, u'changed': True, u'item': u"pidstat -tuw -C 'Suricata|ens2f0|FM#|FR#|CW|CS|US' 10 60", u'finished': 0, u'results_file': u'/root/.ansible_async/809691075758.13457'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'408121866984.13483', u'failed': False, u'started': 1, u'changed': True, u'item': u"for i in {1..60}; do date; ethtool -S ens2f0 | grep -E 'rx_dropped|rx_missed|rx_packets|errors'; echo ''; sleep 10; done", u'finished': 0, u'results_file': u'/root/.ansible_async/408121866984.13483'})
changed: [vhe@192.168.1.191] => (item={u'ansible_loop_var': u'item', u'ansible_job_id': u'973025810550.13513', u'failed': False, u'started': 1, u'changed': True, u'item': u'perl /usr/local/sbin/softnet-stat.pl --count 60 --sec 10', u'finished': 0, u'results_file': u'/root/.ansible_async/973025810550.13513'})

TASK [common : Fetch command output logs] **************************************
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191] => (item=None)
changed: [vhe@192.168.1.191]

TASK [common : Generate suri-stats plot] ***************************************
fatal: [vhe@192.168.1.191]: FAILED! => {"changed": true, "cmd": ["suri-stats", "-p", "-c", "capture.kernel_packets,capture.kernel_drops,tcp.reassembly_gap", "-S", "-o", "/tmp/plot.png", "/var/log/suricata/stats.log"], "delta": "0:00:00.592381", "end": "2021-05-30 11:29:07.588666", "msg": "non-zero return code", "rc": 1, "start": "2021-05-30 11:29:06.996285", "stderr": "Traceback (most recent call last):\n  File \"/usr/local/bin/suri-stats\", line 4, in <module>\n    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script\n    self.require(requires)[0].run_script(script_name, ns)\n  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script\n    exec(script_code, namespace, namespace)\n  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>\n    \n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot\n  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter\nKeyError: 'capture.kernel_drops'", "stderr_lines": ["Traceback (most recent call last):", "  File \"/usr/local/bin/suri-stats\", line 4, in <module>", "    __import__('pkg_resources').run_script('suri-stats==0.6', 'suri-stats')", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 658, in run_script", "    self.require(requires)[0].run_script(script_name, ns)", "  File \"/usr/lib/python2.7/dist-packages/pkg_resources/__init__.py\", line 1445, in run_script", "    exec(script_code, namespace, namespace)", "  File \"/usr/local/lib/python2.7/dist-packages/suri_stats-0.6-py2.7.egg/EGG-INFO/scripts/suri-stats\", line 138, in <module>", "    ", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 246, in plot", "  File \"build/bdist.linux-x86_64/egg/suristats/suristats.py\", line 195, in get_counter", "KeyError: 'capture.kernel_drops'"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [common : Fetch plot] *****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.log] *********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch stats.log] ************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch suricata.yaml] ********************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch eve.json] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Register dmesg] *************************************************
changed: [vhe@192.168.1.191]

TASK [common : Fetch dmesg] ****************************************************
changed: [vhe@192.168.1.191]

TASK [common : Dump all variables] *********************************************
changed: [vhe@192.168.1.191]

PLAY RECAP *********************************************************************
vhe@192.168.1.191          : ok=189  changed=146  unreachable=0    failed=0    skipped=0    rescued=0    ignored=6   

